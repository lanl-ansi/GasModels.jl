<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Constraints · GasModels</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-367975-10"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-367975-10', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="GasModels logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">GasModels</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../quickguide/">Getting Started</a></li><li><a class="tocitem" href="../data-format/">Input Data Formats</a></li><li><a class="tocitem" href="../network-data/">Network Data Format</a></li><li><a class="tocitem" href="../result-data/">Result Data Format</a></li><li><a class="tocitem" href="../math-model/">Mathematical Model</a></li><li><a class="tocitem" href="../direction/">Direction Model</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../formulations/">Network Formulations</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox" checked/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Steady State Specifications</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../ss-specifications/">Problem Specifications</a></li><li><a class="tocitem" href="../objective/">Objective</a></li><li><a class="tocitem" href="../variables/">Variables</a></li><li class="is-active"><a class="tocitem" href>Constraints</a><ul class="internal"><li><a class="tocitem" href="#Constraint-Templates"><span>Constraint Templates</span></a></li><li><a class="tocitem" href="#Junction-Constraints"><span>Junction Constraints</span></a></li><li><a class="tocitem" href="#Pipe-Constraints"><span>Pipe Constraints</span></a></li><li><a class="tocitem" href="#Resistor-Constraints"><span>Resistor Constraints</span></a></li><li><a class="tocitem" href="#Loss-Resistor-Constraints"><span>Loss Resistor Constraints</span></a></li><li><a class="tocitem" href="#Compressor-Constraints"><span>Compressor Constraints</span></a></li><li><a class="tocitem" href="#Regulator-Constraints"><span>Regulator Constraints</span></a></li><li><a class="tocitem" href="#Valve-Constraints"><span>Valve Constraints</span></a></li><li><a class="tocitem" href="#Short-Pipes"><span>Short Pipes</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../transient-specifications/">Transient Specifications</a></li><li><a class="tocitem" href="../parser/">File IO</a></li></ul></li><li><a class="tocitem" href="../developer/">Developer</a></li><li><a class="tocitem" href="../examples/">Examples</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Library</a></li><li><a class="is-disabled">Steady State Specifications</a></li><li class="is-active"><a href>Constraints</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Constraints</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/lanl-ansi/GasModels.jl/blob/master/docs/src/constraints.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Constraints"><a class="docs-heading-anchor" href="#Constraints">Constraints</a><a id="Constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Constraints" title="Permalink"></a></h1><h2 id="Constraint-Templates"><a class="docs-heading-anchor" href="#Constraint-Templates">Constraint Templates</a><a id="Constraint-Templates-1"></a><a class="docs-heading-anchor-permalink" href="#Constraint-Templates" title="Permalink"></a></h2><p>Constraint templates help simplify data wrangling across multiple Gas Flow formulations by providing an abstraction layer between the network data and network constraint definitions. The constraint template&#39;s job is to extract the required parameters from a given network data structure and pass the data as named arguments to the Gas Flow formulations.</p><p>These templates should be defined over <code>AbstractGasModel</code> and should not refer to model variables. For more details, see the files: <code>core/constraint_template.jl</code> and <code>core/constraint.jl</code>.</p><h2 id="Junction-Constraints"><a class="docs-heading-anchor" href="#Junction-Constraints">Junction Constraints</a><a id="Junction-Constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Junction-Constraints" title="Permalink"></a></h2><h3 id="Flow-balance-constraints"><a class="docs-heading-anchor" href="#Flow-balance-constraints">Flow balance constraints</a><a id="Flow-balance-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Flow-balance-constraints" title="Permalink"></a></h3><p>The primary constraints related to junctions ensure that mass flow is balanced at these nodes. The specifics of the constraint implementation will change if there are network design options (denoted by <code>\_ne</code> in the name of the function).</p><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_mass_flow_balance" href="#GasModels.constraint_mass_flow_balance"><code>GasModels.constraint_mass_flow_balance</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: standard flow balance equation where demand and production are variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint.jl#L50">source</a></section><section><div><p>Template: Constraints for mass flow balance equation where demand and production is are a mix of constants and variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L210">source</a></section><section><div><p>Constraint: standard flow balance equation where demand and production are variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L9">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_mass_flow_balance_ne" href="#GasModels.constraint_mass_flow_balance_ne"><code>GasModels.constraint_mass_flow_balance_ne</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: standard flow balance equation where demand and production are variables and there are expansion connections</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint.jl#L76">source</a></section><section><div><p>Template: Constraints for mass flow balance equation where demand and production is are a mix of constants and variables and there are expansion connections</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L252">source</a></section><section><div><p>Constraint: standard flow balance equation where demand and production are variables and there are expansion connections</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L70">source</a></section></article><h3 id="Direction-On/off-Constraints"><a class="docs-heading-anchor" href="#Direction-On/off-Constraints">Direction On/off Constraints</a><a id="Direction-On/off-Constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Direction-On/off-Constraints" title="Permalink"></a></h3><p>The disjunctive forms of problems (where directions are controlled by on/off variables) include special (redundant) constraints which tie the direction variables together.  Examples include ensuring that ensure at least one edge of junction that has only sources of natural gas has outgoing flow.</p><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_source_flow" href="#GasModels.constraint_source_flow"><code>GasModels.constraint_source_flow</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: Make sure there is at least one direction set to take flow away from a junction (typically used on source nodes)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L360">source</a></section><section><div><p>Template: Constraints for ensuring that at least one direction is set to take flow away from a junction (typically used on source nodes)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template_mi.jl#L5">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_sink_flow" href="#GasModels.constraint_sink_flow"><code>GasModels.constraint_sink_flow</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: Make sure there is at least one direction set to take flow to a junction (typically used on sink nodes)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L407">source</a></section><section><div><p>Template: Constraints for ensuring that at least one direction is set to take flow away from a junction (typically used on sink nodes)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template_mi.jl#L51">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_conserve_flow" href="#GasModels.constraint_conserve_flow"><code>GasModels.constraint_conserve_flow</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: This constraint is intended to ensure that flow is one direction through a node with degree 2 and no production or consumption</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L453">source</a></section><section><div><p>Template: Constraints to ensure that flow is the same direction through a node with degree 2 and no production or consumption </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template_mi.jl#L97">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_source_flow_ne" href="#GasModels.constraint_source_flow_ne"><code>GasModels.constraint_source_flow_ne</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: Make sure there is at least one direction set to take flow away from a junction (typically used on source nodes)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L382">source</a></section><section><div><p>Template: Constraints for ensuring that at least one direction is set to take flow away from a junction (typically used on source nodes)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template_mi.jl#L26">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_sink_flow_ne" href="#GasModels.constraint_sink_flow_ne"><code>GasModels.constraint_sink_flow_ne</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: Make sure there is at least one direction set to take flow to a junction (typically used on sink nodes)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L428">source</a></section><section><div><p>Template: Constraints for ensuring that at least one direction is set to take flow away from a junction (typically used on sink nodes)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template_mi.jl#L72">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_conserve_flow_ne" href="#GasModels.constraint_conserve_flow_ne"><code>GasModels.constraint_conserve_flow_ne</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: This constraint is intended to ensure that flow is on direction through a node with degree 2 and no production or consumption for a node with expansion edges</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L508">source</a></section><section><div><p>Template: Constraints to ensure that flow is the same direction through a node with degree 2 and no production or consumption</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template_mi.jl#L118">source</a></section></article><h2 id="Pipe-Constraints"><a class="docs-heading-anchor" href="#Pipe-Constraints">Pipe Constraints</a><a id="Pipe-Constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Pipe-Constraints" title="Permalink"></a></h2><h3 id="Weymouth&#39;s-law-constraints"><a class="docs-heading-anchor" href="#Weymouth&#39;s-law-constraints">Weymouth&#39;s law constraints</a><a id="Weymouth&#39;s-law-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Weymouth&#39;s-law-constraints" title="Permalink"></a></h3><p>The primary constraints related to pipes ensure that that pressure drop and flow across a pipe is related through the Weymouth relationships. Here, the naming convention <code>ne</code> is used to denote the form of the constraint used for expansion pipes.</p><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_pipe_weymouth" href="#GasModels.constraint_pipe_weymouth"><code>GasModels.constraint_pipe_weymouth</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Template: Weymouth equation for defining the relationship between pressure drop and flow across a pipe</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L127">source</a></section><section><div><p>Constraint: Weymouth equation–not applicable for LRDWP models</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/lrdwp.jl#L29">source</a></section><section><div><p>Constraint: Weymouth equation–not applicable for LRWP models</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/lrwp.jl#L13">source</a></section><section><div><p>Weymouth equation with absolute value</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/wp.jl#L22">source</a></section><section><div><p>Weymouth equation with discrete direction variables</p><p>Constraint 1:</p><p>This constraint should be active when flow goes from i to j. Pressure needs to decrease from i to j. y = 1 models this condition When y = 1, this constraint becomes w<em>(pi - pj) &gt;= f^2, which is only true when pi &gt;= pj When y = 0, we have w</em>(pi - pj) &gt;= f^2 - f<em>min^2 + w*pd</em>min. By definition, w<em>(pi - pj) &lt;= 0.  The lower bound on w</em>(pi - pj) is w*pd<em>min. Since flow is reversed in this situation, f^2 is bounded by f</em>min^2. Thus f^2 - f_min^2 only further decreases the rhs. Thus, this constraint is always true (inactive when y = 0)</p><p>Constraint 2:</p><p>When y = 1, w(pi - pj) &gt;= 0 this constraint needs to be active, so should be upper bounded by f^2 to get equality when combined with weymouth1</p><p><strong>When y = 0, w(pi - pj) &lt;= 0, making this constraint always true (inactive when y = 0)</strong></p><p>Constraint 3:</p><p>This constraint should be active when flow goes from j to i. Pressure needs to decrease from j to i. y = 0 models this condition</p><p><strong>When y = 0, this constraint becomes w*(pj - pi) &gt;= f^2, which is only true when pj &gt;= pi</strong></p><p><strong>When y = 1, we have w<em>(pj - pi) &gt;= f^2 - f_max^2 - w</em>pd_max. By definition, w<em>(pj - pi) &lt;= 0.  The lower bound on w</em>(pi - pj) is</strong></p><p><strong>-w*pd<em>max (sign flip on pi amnd pj). Since flow is forward in this situation, f^2 is bounded by f</em>max^2. Thus f^2 - f_max^2 only further decreases the rhs.</strong></p><p><strong>Thus, this constraint is always true (inactive when y = 1)</strong></p><p>Constraint 4:</p><p><strong>When y = 0, w(pj - pi) &gt;= 0 this constraint needs to be active, so should be upper bounded by f^2 to get equality when combined with weymouth3</strong></p><p><strong>When y = 1, w(pj - pi) &lt;= 0, making this constraint always true (inactive when y = 1)</strong></p><p><strong>note the sign flip between pi and pj</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/dwp.jl#L25-L54">source</a></section><section><div><p>Weymouth equation for a pipe</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/crdwp.jl#L104">source</a></section><section><div><p>Weymouth equation with absolute value</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/cwp.jl#L133">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_pipe_weymouth_ne" href="#GasModels.constraint_pipe_weymouth_ne"><code>GasModels.constraint_pipe_weymouth_ne</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Template: Weymouth equation for expansion pipes</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L184">source</a></section><section><div><p>Constraint: Weymouth equation</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/lrdwp.jl#L50">source</a></section><section><div><p>Constraint: Weymouth equation</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/lrwp.jl#L164">source</a></section><section><div><p>Weymouth equation for an expansion pipe</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/wp.jl#L95">source</a></section><section><div><p>Weymouth equation for an expansion pipe</p><p>Constraint 1:</p><p>When zp = 1, this constraint reduces to constraint weymouth1 in constraint<em>pipe</em>weymouth, which is what we want (i.e. an active constraint) When zp = 0, we want this constraint to be in active AND any y value should be valid.  In this case, since f^2 = 0 (there is no flow) the constraint becomes w<em>(pi - pj) &gt;= -(1-y) * (f_min^2 - w</em>pd<em>min) - abs(w*pd</em>min). When y = 1, we have w<em>(pi - pj) &gt;= -abs(w</em>pd<em>min). Since pd</em>min is the lower bound on pi - pj, this is always true.  When y = 0, we have w<em>(pi - pj) &gt;= -f_min^2 + w</em>pd<em>min - abs(w*pd</em>min). Which is always true. w<em>pd_min is the lower bound on w</em>pi - pj and the other two terms just drive the lower bound further down.</p><p>Constraint 2:</p><p>When zp = 1, this constraint reduces to constraint weymouth2 in constraint<em>pipe</em>weymouth, which is what we want (i.e. an active constraint) When zp = 0, we have w<em>(pi - pj) &lt;= f^2 + w</em>pd<em>max.  Since w*pd</em>max is the upper bound on w*(pi-pj), this is always true.</p><p>Constraint 3:</p><p>When zp = 1, this constraint reduces to constraint weymouth3 in constraint<em>pipe</em>weymouth, which is what we want (i.e. an active constraint) When zp = 0, we want this constraint to be in active AND any y value should be valid.  In this case, since f^2 = 0 (there is no flow) the constraint becomes w<em>(pj - pi) &gt;= - y * (f_max^2 + w</em>pd<em>max) - abs(w*pd</em>max). When y = 0, we have w<em>(pj - pi) &gt;= -abs(w</em>pd<em>max). Since -pd</em>max is the lower bound on pj - pi note reversal of pressure sign, this is always true.  When y = 1, we have w<em>(pj - pi) &gt;= -f_max^2 - w</em>pd<em>max - abs(w*pd</em>max). Which is always true. -w<em>pd_max is the lower bound on w</em>(pj - pi) (note the sign flip). The other two terms just drive the lower bound further down.</p><p>Constraint 4:</p><p><strong>When zp = 1, this constraint reduces to constraint weymouth4 in constraint<em>pipe</em>weymouth, which is what we want (i.e. an active constraint)</strong></p><p><strong>When zp = 0, we have (pj - pi) &lt;= f^2 - w<em>pd_min).  Since -w</em>pd_min is the upper bound on w*(pj-pi)–the pi and pj are flipped, this is always true.</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/dwp.jl#L151-L179">source</a></section><section><div><p>Weymouth equation for an expansion pipe</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/crdwp.jl#L188">source</a></section><section><div><p>Weymouth equation for an expansion pipe</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/cwp.jl#L184">source</a></section></article><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>constraint_pipe_weymouth_ne</code>. Check Documenter&#39;s build log for details.</p></div></div><h3 id="Mass-flow-and-pressure-drop-constraints"><a class="docs-heading-anchor" href="#Mass-flow-and-pressure-drop-constraints">Mass flow and pressure drop constraints</a><a id="Mass-flow-and-pressure-drop-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Mass-flow-and-pressure-drop-constraints" title="Permalink"></a></h3><p>Secondarily, there are constraints associated with limits on pressure drop or mass flow across pipes. These constraints also use the <code>ne</code> and naming conventions.</p><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_pipe_mass_flow" href="#GasModels.constraint_pipe_mass_flow"><code>GasModels.constraint_pipe_mass_flow</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: Constraint on mass flow across the pipe</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint.jl#L218">source</a></section><section><div><p>Template: Constraint on mass flow across a pipe</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L84">source</a></section><section><div><p>Constraint: Constraint on flow across a pipe when there are on/off direction variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L156">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_pipe_pressure" href="#GasModels.constraint_pipe_pressure"><code>GasModels.constraint_pipe_pressure</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: Constraints which define pressure drop across a pipe</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint.jl#L199">source</a></section><section><div><p>Template: Pressure drop across pipes</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L94">source</a></section><section><div><p>Constraint: Constraints which define pressure drop across a pipe when there are on/off direction variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L146">source</a></section></article><h3 id="Network-expansion-constraints"><a class="docs-heading-anchor" href="#Network-expansion-constraints">Network expansion constraints</a><a id="Network-expansion-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Network-expansion-constraints" title="Permalink"></a></h3><p>These constraints turn on or off the association between pressure and flow for pipes designated as expansion options.</p><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_pipe_ne" href="#GasModels.constraint_pipe_ne"><code>GasModels.constraint_pipe_ne</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: on/off constraints on flow across pipes for expansion pipes</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint.jl#L190">source</a></section><section><div><p>Template: Constraint associatd with turning off flow depending on the status of expansion pipes</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L173">source</a></section></article><h3 id="Direction-on/off-constraints"><a class="docs-heading-anchor" href="#Direction-on/off-constraints">Direction on/off constraints</a><a id="Direction-on/off-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Direction-on/off-constraints" title="Permalink"></a></h3><p>The disjunctive forms of problems (where directions are controlled by on/off variables) include special (redundant) constraints which tie the direction variables together.  Examples include ensuring that ensuring that parallel pipes have flow in the same direction.</p><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_pipe_parallel_flow" href="#GasModels.constraint_pipe_parallel_flow"><code>GasModels.constraint_pipe_parallel_flow</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: ensures that parallel lines have flow in the same direction</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L627">source</a></section><section><div><p>Template: Constraints which ensure that parallel lines have flow in the same direction - customized for pipe</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template_mi.jl#L186">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_ne_pipe_parallel_flow" href="#GasModels.constraint_ne_pipe_parallel_flow"><code>GasModels.constraint_ne_pipe_parallel_flow</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: ensures that parallel lines have flow in the same direction</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L569">source</a></section><section><div><p>Template: Constraints which ensure that parallel lines have flow in the same direction - customized for ne_pipe</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template_mi.jl#L146">source</a></section></article><h2 id="Resistor-Constraints"><a class="docs-heading-anchor" href="#Resistor-Constraints">Resistor Constraints</a><a id="Resistor-Constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Resistor-Constraints" title="Permalink"></a></h2><h3 id="Weymouth&#39;s-law-constraints-2"><a class="docs-heading-anchor" href="#Weymouth&#39;s-law-constraints-2">Weymouth&#39;s law constraints</a><a class="docs-heading-anchor-permalink" href="#Weymouth&#39;s-law-constraints-2" title="Permalink"></a></h3><p>The primary constraints related to resistor ensure that that pressure drop and flow across a resistor is related through the Weymouth relationships.</p><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>constraint_resistor_weymouth</code>. Check Documenter&#39;s build log for details.</p></div></div><h3 id="Mass-flow-and-pressure-drop-constraints-2"><a class="docs-heading-anchor" href="#Mass-flow-and-pressure-drop-constraints-2">Mass flow and pressure drop constraints</a><a class="docs-heading-anchor-permalink" href="#Mass-flow-and-pressure-drop-constraints-2" title="Permalink"></a></h3><p>Secondarily, there are constraints associated with limits on pressure drop or mass flow across pipes.</p><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_resistor_mass_flow" href="#GasModels.constraint_resistor_mass_flow"><code>GasModels.constraint_resistor_mass_flow</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: Constraint on mass flow across the resistor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint.jl#L19">source</a></section><section><div><p>Template: Constraint on mass flow across a pipe</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L17">source</a></section><section><div><p>Constraint: Constraint on flow across a resistor when there are on/off direction variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L211">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_resistor_pressure" href="#GasModels.constraint_resistor_pressure"><code>GasModels.constraint_resistor_pressure</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Template: Pressure drop across resistor with on/off direction variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L27">source</a></section><section><div><p>Constraint: Define pressures across a resistor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/lrdwp.jl#L41">source</a></section><section><div><p>Constraint: Define pressures across a resistor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/lrwp.jl#L44">source</a></section><section><div><p>Constraint: Constraints which define pressure drop across a resistor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/wp.jl#L10">source</a></section><section><div><p>Constraint: Define pressures across a resistor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/dwp.jl#L134">source</a></section><section><div><p>Constraint: Define pressures across a resistor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/crdwp.jl#L171">source</a></section></article><h3 id="Direction-on/off-constraints-2"><a class="docs-heading-anchor" href="#Direction-on/off-constraints-2">Direction on/off constraints</a><a class="docs-heading-anchor-permalink" href="#Direction-on/off-constraints-2" title="Permalink"></a></h3><p>The disjunctive forms of problems (where directions are controlled by on/off variables) include special (redundant) constraints which tie the direction variables together.  Examples include ensuring that ensuring that parallel pipes have flow in the same direction.</p><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_resistor_parallel_flow" href="#GasModels.constraint_resistor_parallel_flow"><code>GasModels.constraint_resistor_parallel_flow</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: ensures that parallel lines have flow in the same direction</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L678">source</a></section><section><div><p>Template: Constraints which ensure that parallel lines have flow in the same direction - customized for resistor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template_mi.jl#L243">source</a></section></article><h2 id="Loss-Resistor-Constraints"><a class="docs-heading-anchor" href="#Loss-Resistor-Constraints">Loss Resistor Constraints</a><a id="Loss-Resistor-Constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Loss-Resistor-Constraints" title="Permalink"></a></h2><p>The primary constraints related to loss resistors ensure that the pressure drop is constant along each edge. They also ensure that squared pressure variables are somehow related to (nonsquared) pressure variables.</p><h3 id="Mass-flow-and-pressure-drop-constraints-3"><a class="docs-heading-anchor" href="#Mass-flow-and-pressure-drop-constraints-3">Mass flow and pressure drop constraints</a><a class="docs-heading-anchor-permalink" href="#Mass-flow-and-pressure-drop-constraints-3" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_loss_resistor_mass_flow" href="#GasModels.constraint_loss_resistor_mass_flow"><code>GasModels.constraint_loss_resistor_mass_flow</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: Constraint on mass flow across the loss_resistor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint.jl#L29">source</a></section><section><div><p>Template: Constraint on mass flow across a loss_resistor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L60">source</a></section><section><div><p>Constraint: Constraint on flow across a loss_resistor when there are on/off direction variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L224">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_loss_resistor_pressure" href="#GasModels.constraint_loss_resistor_pressure"><code>GasModels.constraint_loss_resistor_pressure</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Template: Pressure drop across loss_resistor with on/off direction variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L70">source</a></section><section><div><p>Constraint: Constraints which define pressure drop across a loss resistor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/lrdwp.jl#L46">source</a></section><section><div><p>Constraint: Constraints which define pressure drop across a loss resistor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/lrwp.jl#L49">source</a></section><section><div><p>Constraint: Constraints which define pressure drop across a loss resistor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/wp.jl#L73">source</a></section><section><div><p>Constraint: Constraints which define pressure drop across a loss resistor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/dwp.jl#L218">source</a></section><section><div><p>Constraint: Constraints which define pressure drop across a loss resistor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/crdwp.jl#L252">source</a></section></article><h2 id="Compressor-Constraints"><a class="docs-heading-anchor" href="#Compressor-Constraints">Compressor Constraints</a><a id="Compressor-Constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Compressor-Constraints" title="Permalink"></a></h2><h3 id="Operations-Constraints"><a class="docs-heading-anchor" href="#Operations-Constraints">Operations Constraints</a><a id="Operations-Constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Operations-Constraints" title="Permalink"></a></h3><p>The primary constraints related to compressors ensure that that the compressors operate within the limits of their capability (boost ratio, energy consumption, etc.). These constraints use the <code>ne</code> naming conventions to denote constraints where the compressor is an expansion option.</p><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_compressor_ratios" href="#GasModels.constraint_compressor_ratios"><code>GasModels.constraint_compressor_ratios</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Template: Compression ratios for a compressor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L350">source</a></section><section><div><p>Constraint: enforces pressure changes bounds that obey compression ratios for a compressor with on/off direction variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L248">source</a></section><section><div><p>Constraint: Compressor ratio constraints on pressure differentials–not applicable for LRWP models</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/lrwp.jl#L53">source</a></section><section><div><p>enforces pressure changes bounds that obey compression ratios</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/wp.jl#L121">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_compressor_ratios_ne" href="#GasModels.constraint_compressor_ratios_ne"><code>GasModels.constraint_compressor_ratios_ne</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Template: constraints on pressure drop across a compressor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L399">source</a></section><section><div><p>Constraint: constraints on pressure drop across expansion compressors with on/off decision variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L284">source</a></section><section><div><p>Constraint: compressor ratios on a new compressor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/lrwp.jl#L170">source</a></section><section><div><p>constraints on pressure drop across a compressor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/wp.jl#L167">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_compressor_mass_flow" href="#GasModels.constraint_compressor_mass_flow"><code>GasModels.constraint_compressor_mass_flow</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: constraints on flow across a compressor - handled by variable bounds</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint.jl#L246">source</a></section><section><div><p>Template: constraints on flow across a compressor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L377">source</a></section><section><div><p>Constraint: constraints on flow across a compressor with on/off direction variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L237">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_compressor_energy" href="#GasModels.constraint_compressor_energy"><code>GasModels.constraint_compressor_energy</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Template: Constraints on the compressor energy</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L456">source</a></section><section><div><p>Constraint: constrains the energy of the compressor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/lrdwp.jl#L106">source</a></section><section><div><p>Constraint: constrains the energy of the compressor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/lrwp.jl#L298">source</a></section><section><div><p>Constraint: constrains the energy of the compressor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/wp.jl#L298">source</a></section><section><div><p>Constraint: constrains the energy of the compressor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/dwp.jl#L254">source</a></section><section><div><p>Constraint: constrains the energy of the compressor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/crdwp.jl#L295">source</a></section></article><h3 id="Direction-On/off-Constraints-2"><a class="docs-heading-anchor" href="#Direction-On/off-Constraints-2">Direction On/off Constraints</a><a class="docs-heading-anchor-permalink" href="#Direction-On/off-Constraints-2" title="Permalink"></a></h3><p>The disjunctive forms of problems (where directions are controlled by on/off variables) include special constraints to connect direction of flow with the choice of the binary variable.</p><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_compressor_parallel_flow" href="#GasModels.constraint_compressor_parallel_flow"><code>GasModels.constraint_compressor_parallel_flow</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: ensures that parallel lines have flow in the same direction</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L653">source</a></section><section><div><p>Template: Constraints which ensure that parallel lines have flow in the same direction - customized for compressor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template_mi.jl#L205">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_ne_compressor_parallel_flow" href="#GasModels.constraint_ne_compressor_parallel_flow"><code>GasModels.constraint_ne_compressor_parallel_flow</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: ensures that parallel lines have flow in the same direction</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L598">source</a></section><section><div><p>Template: Constraints which ensure that parallel lines have flow in the same direction - customized for ne_compressor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template_mi.jl#L166">source</a></section></article><h3 id="Network-Expansion-Constraints"><a class="docs-heading-anchor" href="#Network-Expansion-Constraints">Network Expansion Constraints</a><a id="Network-Expansion-Constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Network-Expansion-Constraints" title="Permalink"></a></h3><p>Constraints are also used to turn on/off flow through a compressor in expansion planning formulations</p><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_compressor_ne" href="#GasModels.constraint_compressor_ne"><code>GasModels.constraint_compressor_ne</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: on/off constraints on flow across compressors for expansion variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint.jl#L237">source</a></section><section><div><p>Template: Constraint for turning on or off flow through expansion compressor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L367">source</a></section></article><h2 id="Regulator-Constraints"><a class="docs-heading-anchor" href="#Regulator-Constraints">Regulator Constraints</a><a id="Regulator-Constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Regulator-Constraints" title="Permalink"></a></h2><h3 id="Operations-Constraints-2"><a class="docs-heading-anchor" href="#Operations-Constraints-2">Operations Constraints</a><a class="docs-heading-anchor-permalink" href="#Operations-Constraints-2" title="Permalink"></a></h3><p>The primary constraints related to regulator ensure that that the valves operate within the limits of their capability (pressure reduction).  The control valve also has an open/close variable to determine whether or not flow is allowed through the valve</p><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_on_off_regulator_mass_flow" href="#GasModels.constraint_on_off_regulator_mass_flow"><code>GasModels.constraint_on_off_regulator_mass_flow</code></a> — <span class="docstring-category">Function</span></header><section><div><p>constraints on flow across control valves</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint.jl#L269">source</a></section><section><div><p>Template: constraints on flow across control valves with on/off direction variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L482">source</a></section><section><div><p>Constraint: Constraints on flow across control valves with on/off direction variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L329">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_on_off_regulator_pressure" href="#GasModels.constraint_on_off_regulator_pressure"><code>GasModels.constraint_on_off_regulator_pressure</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint Enforces pressure changes bounds that obey decompression ratios for</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L492">source</a></section><section><div><p>Constraint: Constraints on pressure drop across control valves that have on/off direction variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L343">source</a></section><section><div><p>constraints on pressure drop across control valves–not applicable for LRWP models</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/lrwp.jl#L130">source</a></section><section><div><p>constraints on pressure drop across control valves</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/form/wp.jl#L223">source</a></section></article><h3 id="Direction-On/off-Constraints-3"><a class="docs-heading-anchor" href="#Direction-On/off-Constraints-3">Direction On/off Constraints</a><a class="docs-heading-anchor-permalink" href="#Direction-On/off-Constraints-3" title="Permalink"></a></h3><p>The disjunctive forms of problems (where directions are controlled by on/off variables) include special constraints to connect direction of flow with the choice of the binary variable.</p><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_regulator_parallel_flow" href="#GasModels.constraint_regulator_parallel_flow"><code>GasModels.constraint_regulator_parallel_flow</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: ensures that parallel lines have flow in the same direction</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L753">source</a></section><section><div><p>Template: Constraints which ensure that parallel lines have flow in the same direction - customized for control valve</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template_mi.jl#L281">source</a></section></article><h2 id="Valve-Constraints"><a class="docs-heading-anchor" href="#Valve-Constraints">Valve Constraints</a><a id="Valve-Constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Valve-Constraints" title="Permalink"></a></h2><h3 id="Operations-Constraints-3"><a class="docs-heading-anchor" href="#Operations-Constraints-3">Operations Constraints</a><a class="docs-heading-anchor-permalink" href="#Operations-Constraints-3" title="Permalink"></a></h3><p>The primary function of a valve is to open or close a pipe.</p><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_on_off_valve_mass_flow" href="#GasModels.constraint_on_off_valve_mass_flow"><code>GasModels.constraint_on_off_valve_mass_flow</code></a> — <span class="docstring-category">Function</span></header><section><div><p>constraints on flow across valves</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint.jl#L136">source</a></section><section><div><p>Template: constraints on flow across valves modeled with on/off direction variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L336">source</a></section><section><div><p>Constraint: Constraints on flow across valves with on/off direction variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L311">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_on_off_valve_pressure" href="#GasModels.constraint_on_off_valve_pressure"><code>GasModels.constraint_on_off_valve_pressure</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: Constraints on pressure drop across valves where the valve can open or close</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint.jl#L126">source</a></section><section><div><p>Template: Constraint on pressure drop across valves, where the valve may be closed or opened</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L325">source</a></section></article><h3 id="Direction-On/off-Constraints-4"><a class="docs-heading-anchor" href="#Direction-On/off-Constraints-4">Direction On/off Constraints</a><a class="docs-heading-anchor-permalink" href="#Direction-On/off-Constraints-4" title="Permalink"></a></h3><p>The disjunctive forms of problems (where directions are controlled by on/off variables) include special constraints to connect direction of flow with the choice of the binary variable.</p><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_valve_parallel_flow" href="#GasModels.constraint_valve_parallel_flow"><code>GasModels.constraint_valve_parallel_flow</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: ensures that parallel lines have flow in the same direction</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L728">source</a></section><section><div><p>Template: Constraints which ensure that parallel lines have flow in the same direction - customized for valve</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template_mi.jl#L262">source</a></section></article><h2 id="Short-Pipes"><a class="docs-heading-anchor" href="#Short-Pipes">Short Pipes</a><a id="Short-Pipes-1"></a><a class="docs-heading-anchor-permalink" href="#Short-Pipes" title="Permalink"></a></h2><h3 id="Pressure-Constraints"><a class="docs-heading-anchor" href="#Pressure-Constraints">Pressure Constraints</a><a id="Pressure-Constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Pressure-Constraints" title="Permalink"></a></h3><p>Short pipes are used to model frictionless connections between junctions.  The primary constraint ensures the pressure on both sides of the short pipe are the same. </p><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_short_pipe_pressure" href="#GasModels.constraint_short_pipe_pressure"><code>GasModels.constraint_short_pipe_pressure</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: Constraint on pressure drop across a short pipe</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint.jl#L109">source</a></section><section><div><p>Template: Constraint on pressure drop across a short pipe</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L302">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_short_pipe_mass_flow" href="#GasModels.constraint_short_pipe_mass_flow"><code>GasModels.constraint_short_pipe_mass_flow</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: Constraints on flow across a short pipe with on/off direction variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint.jl#L117">source</a></section><section><div><p>Constraint: constraints on flow across a short pipe</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template.jl#L311">source</a></section><section><div><p>Constraint: Constraints on flow across a short pipe with on/off direction variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L198">source</a></section></article><h3 id="Direction-On/off-Constraints-5"><a class="docs-heading-anchor" href="#Direction-On/off-Constraints-5">Direction On/off Constraints</a><a class="docs-heading-anchor-permalink" href="#Direction-On/off-Constraints-5" title="Permalink"></a></h3><p>The disjunctive forms of problems (where directions are controlled by on/off variables) include special constraints to connect direction of flow with the choice of the binary variable.</p><article class="docstring"><header><a class="docstring-binding" id="GasModels.constraint_short_pipe_parallel_flow" href="#GasModels.constraint_short_pipe_parallel_flow"><code>GasModels.constraint_short_pipe_parallel_flow</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Constraint: ensures that parallel lines have flow in the same direction</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_mi.jl#L703">source</a></section><section><div><p>Template: Constraints which ensure that parallel lines have flow in the same direction - customized for short pipe</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/GasModels.jl/blob/6bc92924987067c6344aab4891c5e705989b4e29/src/core/constraint_template_mi.jl#L224">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../variables/">« Variables</a><a class="docs-footer-nextpage" href="../transient-specifications/">Transient Specifications »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Wednesday 11 February 2026 21:28">Wednesday 11 February 2026</span>. Using Julia version 1.12.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
